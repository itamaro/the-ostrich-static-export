<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en-US"
	itemscope 
	itemtype="http://schema.org/Article" 
	prefix="og: http://ogp.me/ns#" > <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en-US"
	itemscope 
	itemtype="http://schema.org/Article" 
	prefix="og: http://ogp.me/ns#" > <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en-US"
	itemscope 
	itemtype="http://schema.org/Article" 
	prefix="og: http://ogp.me/ns#" > <![endif]-->
<!--[if IE 9 ]><html class="ie ie9" lang="en-US"
	itemscope 
	itemtype="http://schema.org/Article" 
	prefix="og: http://ogp.me/ns#" > <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en-US"
	itemscope 
	itemtype="http://schema.org/Article" 
	prefix="og: http://ogp.me/ns#" > <!--<![endif]-->
<head>
<base href="https://www.ostricher.com" />

	<title>On Python Closures | The Ostrich</title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
		<link rel="icon" href="/io-content/uploads/theme-images/favicon.png" type="image/x-icon" />
		
	
	
	<script type='text/javascript'>
	(function() {
if ("-ms-user-select" in document.documentElement.style && navigator.userAgent.match(/IEMobile\/10\.0/)) {
var msViewportStyle = document.createElement("style");
msViewportStyle.appendChild(
document.createTextNode("@-ms-viewport{width:auto!important}")
);
document.getElementsByTagName("head")[0].appendChild(msViewportStyle);
}
})();
</script>
<!-- Jetpack Site Verification Tags -->
<meta name="google-site-verification" content="Po_E-eL7srSzieLmesJQntF7f-r3bV83AW_HQTe5EqE" />


<!-- All in One SEO Pack 2.3.13.2 by Michael Torbert of Semper Fi Web Design[766,793] -->
<link rel="author" href="https://plus.google.com/+ItamarOstricher/" />
<meta name="description"  content="Closures are an interesting concept in computer programming. Powerful but tricky. This post provides a clear explanation, with details on support in Python." />

<meta name="keywords"  content="closure,programming,concept,pep,lexical,scoping,python" />

<link rel="canonical" href="https://www.ostricher.com/2014/10/on-python-closures/" />
<meta property="og:title" content="On Python Closures | The Ostrich" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.ostricher.com/2014/10/on-python-closures/" />
<meta property="og:image" content="http://i1.wp.com/www.ostricher.com/io-content/uploads/2014/10/nested-python.jpg?fit=563%2C563" />
<meta property="og:site_name" content="The Ostrich" />
<meta property="og:description" content="Closures are an interesting concept in computer programming. Powerful but tricky. This post provides a clear explanation, with details on support in Python." />
<meta property="article:published_time" content="2014-10-14T19:42:40Z" />
<meta property="article:modified_time" content="2014-10-14T19:46:34Z" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="On Python Closures | The Ostrich" />
<meta name="twitter:description" content="Closures are an interesting concept in computer programming. Powerful but tricky. This post provides a clear explanation, with details on support in Python." />
<meta name="twitter:image" content="http://i1.wp.com/www.ostricher.com/io-content/uploads/2014/10/nested-python.jpg?fit=563%2C563" />
<meta itemprop="image" content="http://i1.wp.com/www.ostricher.com/io-content/uploads/2014/10/nested-python.jpg?fit=563%2C563" />
			<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-48565506-1', 'auto');
			
			ga('send', 'pageview');
			</script>
<!-- /all in one seo pack -->
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//s.gravatar.com' />
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />



		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.ostricher.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.10"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='adsns_css-css'  href='https://www.ostricher.com/io-content/plugins/adsense-plugin/css/adsns.css?ver=1.44' type='text/css' media='all' />
<link rel='stylesheet' id='contact-form-7-css'  href='https://www.ostricher.com/io-content/plugins/contact-form-7/includes/css/styles.css?ver=4.5' type='text/css' media='all' />
<link rel='stylesheet' id='colorbox-css-css'  href='https://www.ostricher.com/io-content/plugins/easy-image-display/css/colorbox.css?ver=4.7.10' type='text/css' media='all' />
<link rel='stylesheet' id='zilla-likes-css'  href='https://www.ostricher.com/io-content/plugins/zilla-likes/styles/zilla-likes.css?ver=4.7.10' type='text/css' media='all' />
<link rel='stylesheet' id='bootstrap-css'  href='https://www.ostricher.com/io-content/themes/BUZZBLOG-theme-child/bootstrap.css?ver=2.3' type='text/css' media='all' />
<link rel='stylesheet' id='responsive-css'  href='https://www.ostricher.com/io-content/themes/BUZZBLOG-theme-child/responsive.css?ver=2.3' type='text/css' media='all' />
<link rel='stylesheet' id='magnificpopup-css'  href='https://www.ostricher.com/io-content/themes/BUZZBLOG-theme-child/css/magnificpopup.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='mainstyle-css'  href='https://www.ostricher.com/io-content/themes/BUZZBLOG-theme-child/style.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='owl-css'  href='https://www.ostricher.com/io-content/themes/BUZZBLOG-theme-child/css/owl.carousel.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='options_typography_Lato:100,300,400,700,900-css'  href='https://fonts.googleapis.com/css?family=Lato:100,300,400,700,900&#038;subset=latin' type='text/css' media='all' />
<link rel='stylesheet' id='mc4wp-form-basic-css'  href='https://www.ostricher.com/io-content/plugins/mailchimp-for-wp/assets/css/form-basic.min.css?ver=4.1.3' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='https://www.ostricher.com/io-content/plugins/jetpack/css/jetpack.css?ver=4.9' type='text/css' media='all' />
<!-- This site uses the Google Analytics by MonsterInsights plugin v6.1.11 - Using Analytics tracking - https://www.monsterinsights.com/ -->
<script type="text/javascript" data-cfasync="false">
	/* Function to detect opted out users */
	function __gaTrackerIsOptedOut() {
		return document.cookie.indexOf(disableStr + '=true') > -1;
	}

	/* Disable tracking if the opt-out cookie exists. */
	var disableStr = 'ga-disable-UA-48565506-1';
	if ( __gaTrackerIsOptedOut() ) {
		window[disableStr] = true;
	}

	/* Opt-out function */
	function __gaTrackerOptout() {
	  document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
	  window[disableStr] = true;
	}

	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

	__gaTracker('create', 'UA-48565506-1', 'auto');
	__gaTracker('set', 'forceSSL', true);
	__gaTracker('send','pageview');
</script>
<!-- / Google Analytics by MonsterInsights -->
<script type='text/javascript' src='https://www.ostricher.com/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='https://www.ostricher.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/themes/BUZZBLOG-theme/js/modernizr.js?ver=2.0.6'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var related_posts_js_options = {"post_heading":"h4"};
/* ]]> */
</script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/plugins/jetpack/modules/related-posts/related-posts.js?ver=20150408'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var zilla_likes = {"ajaxurl":"https:\/\/www.ostricher.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/plugins/zilla-likes/scripts/zilla-likes.js?ver=4.7.10'></script>
<link rel='https://api.w.org/' href='https://www.ostricher.com/wp-json/' />


<link rel='next' title='How to Simplify Your SConscripts' href='https://www.ostricher.com/2014/10/scons-extreme-sconscript-simplification/' />

<link rel='shortlink' href='http://wp.me/p4XcCP-i5' />



<link rel='dns-prefetch' href='//v0.wordpress.com'>
<link rel='dns-prefetch' href='//jetpack.wordpress.com'>
<link rel='dns-prefetch' href='//s0.wp.com'>
<link rel='dns-prefetch' href='//s1.wp.com'>
<link rel='dns-prefetch' href='//s2.wp.com'>
<link rel='dns-prefetch' href='//public-api.wordpress.com'>
<link rel='dns-prefetch' href='//0.gravatar.com'>
<link rel='dns-prefetch' href='//1.gravatar.com'>
<link rel='dns-prefetch' href='//2.gravatar.com'>
<link rel='dns-prefetch' href='//i0.wp.com'>
<link rel='dns-prefetch' href='//i1.wp.com'>
<link rel='dns-prefetch' href='//i2.wp.com'>
<style type="text/css">.logo {
    margin: 10px auto;
}.top-panel-button .toggle-button {color:#e1e1e1}.top-panel-button {border-color:#eeeeee}.nav__primary {background:#ffffff}@media all and (min-width: 800px) {.flexnav > li > a:after {color:#eeeeee}}.nav__primary {border-color:#d6d6d6}.logo_tagline {color:#444444}.header-overlay {background:#ffffff}.header-overlay {-moz-opacity: 0.85; -khtml-opacity: 0.85; opacity: 0.85;}body { background-image:url(/io-content/uploads/theme-images/bg-diaglines.jpg); background-repeat:repeat; background-position:top center;  background-attachment:scroll; }body { background-color:#ffffff;}.headerstyler { background-color:#ffffff;}</style><style type="text/css">.dropcap.bl:first-letter, .text-highlight, .services-grid  .hr, div.jp-play-bar, div.jp-volume-bar-value, .blue, #ascrail2000 div, .progress .bar, .ourclients .hr, .clients .hr, .zoom-icon, .zoom-insta, .zoom-icon-video, .image-mail:hover .zoom-mail, .format-quote, .isotope-item .format-quote, .post-header-article, #showTop, .cbp-spmenu {
background:#ed1d24!important;
}.twitter .stream-item-header .account-group .username, .error404-holder_num, .twitter .stream-item-header .account-group .username, .twitter i, .private-image h3, .twitter-code i {
color:#ed1d24;
}.hi-icon-effect-1 .hi-icon {
box-shadow: 0 0 0 2px #ed1d24;
}.hi-icon-effect-1 .hi-icon:after {
box-shadow: 0 0 0 4px #ed1d24;
}.flexnav ul li:hover > a, .flexnav li li > a:hover, .flexnav li li.sfHover > a, .flexnav li li.current-menu-item > a { background: #ed1d24 url(https://www.ostricher.com/io-content/themes/BUZZBLOG-theme/images/line-menu.png) repeat-x bottom; }.flexnav li ul li a { color: #ffffff}.flexnav li li > a:hover, .flexnav li li.current-menu-item > a { color: #231f20}.flexnav .sub-menu  > li { background: #ed1d24}.sub-menu li:first-child a:after { border-bottom: 11px solid #ed1d24}.flexnav > li > a span, .flexnav > li.current-menu-item > a span, .flexnav > li.current-menu-ancestor  > a span, .flexnav > li > a span, .flexnav li:hover > a span, .flexnav > li > a:hover span { background: #bcbdc0; }.flexnav > li > a:hover {
 color:#bcbdc0;
}.flexnav > li.current-menu-item > a, .flexnav > li.current-menu-ancestor  > a {
 color:#231f20;
}.title-section h2 {
    color: #ed1d24;
}a, .social_link, .related-posts_item a, .post_author a, .breadcrumb a, .post-list a, .comments-custom a, #wp-calendar a, .tagcloud a, .post_date_grid_filtr a, .flexslider a, .footer .social a, .fs-carousel-header a:hover {color:#ed1d24}.btn-color {background-color:#ed1d24!important; border: 2px solid #ed1d24!important;}.btn-white:hover, .btn-white:focus {background-color:#ed1d24!important; border-color:#ed1d24!important;}.link-image a p {background:#ed1d24;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=90)";filter: alpha(opacity=90);-moz-opacity: 0.9;-khtml-opacity: 0.9;opacity: 0.9;}.link-image a:hover p {background:#ed1d24;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter: alpha(opacity=100);-moz-opacity: 1.0;-khtml-opacity: 1.0;opacity: 1.0;}.form-submit input[type="submit"]:hover, .active .btn, .btn:hover, .btn:focus {
  background: #ed1d24;
  border-color: #ed1d24;
}.btn-1c:after {
  background: #ed1d24;
}.btn-1c:hover, .btn-1c:active {
  border: 3px solid #ed1d24;
}.tagcloud a {
  border: 1px solid #ed1d24;
}.flexslider a:hover {
  color: #222222!important;
}</style><style type="text/css">/* MailChimp for WP - Checkbox Styles */
.mc4wp-checkbox-wp-comment-form {
  clear: both;
  display: block;
  position: static;
  width: auto; }
  .mc4wp-checkbox-wp-comment-form input {
    float: none;
    width: auto;
    position: static;
    margin: 0 6px 0 0;
    padding: 0;
    vertical-align: middle;
    display: inline-block !important;
    max-width: 21px;
    -webkit-appearance: checkbox; }
  .mc4wp-checkbox-wp-comment-form label {
    float: none;
    display: block;
    cursor: pointer;
    width: auto;
    position: static;
    margin: 0 0 16px 0; }
</style><style type="text/css">/* MailChimp for WP - Checkbox Styles */
.mc4wp-checkbox-wp-registration-form {
  clear: both;
  display: block;
  position: static;
  width: auto; }
  .mc4wp-checkbox-wp-registration-form input {
    float: none;
    width: auto;
    position: static;
    margin: 0 6px 0 0;
    padding: 0;
    vertical-align: middle;
    display: inline-block !important;
    max-width: 21px;
    -webkit-appearance: checkbox; }
  .mc4wp-checkbox-wp-registration-form label {
    float: none;
    display: block;
    cursor: pointer;
    width: auto;
    position: static;
    margin: 0 0 16px 0; }
</style>
<style type='text/css'>
h1 { font-weight: 200; font-style: normal; font-size: 60px; line-height: 60px; font-family: Lato;  color:#a7a9ac; }
h2 { font-weight: 200; font-style: normal; font-size: 40px; line-height: 40px; font-family: Lato;  color:#a7a9ac; }
h3 { font-weight: 200; font-style: normal; font-size: 34px; line-height: 34px; font-family: Lato;  color:#a7a9ac; }
h4 { font-weight: 200; font-style: normal; font-size: 24px; line-height: 28px; font-family: Lato;  color:#a7a9ac; }
h5 { font-weight: 200; font-style: normal; font-size: 21px; line-height: 32px; font-family: Lato;  color:#a7a9ac; }
h6 { font-weight: 200; font-style: normal; font-size: 17px; line-height: 24px; font-family: Lato;  color:#a7a9ac; }
.main-holder, .mfp-wrap { font-weight: 300; font-style: normal; font-size: 16px; line-height: 31px; font-family: Lato;  color:#000000; }
.logo_h__txt, .logo_link { font-weight: 400; font-style: normal; font-size: 73px; line-height: 45px; font-family: playfair_displayregular;  color:#222222; }
.flexnav > li > a { font-weight: 300; font-style: normal; font-size: 12px; line-height: 21px; font-family: Lato;  color:#939598; }
.nav.footer-nav a { font-weight: 300; font-style: normal; font-size: 12px; line-height: 22px; font-family: Lato;  color:#818285; }
</style>
<style type="text/css">.broken_link, a.broken_link {
	text-decoration: line-through;
}</style><style type="text/css" id="syntaxhighlighteranchor"></style>
	
<!--[if IE 8 ]>
<link rel="stylesheet" id="stylesheet-ie8" type="text/css" href="https://www.ostricher.com/io-content/themes/BUZZBLOG-theme-child/ie8.css" />
	<script src="https://www.ostricher.com/io-content/themes/BUZZBLOG-theme-child/js/respond.js"></script>
<![endif]-->
</head>

<body class="post-template-default single single-post postid-1121 single-format-standard cat-58-id">
	
			<div id="stickynot" class="main-holder" style="margin-top:0px;">
<header id="headerfix" class="headerstyler headerphoto normal_header" style="">
<div class="header-overlay"></div>
<div class="top-panel22 hidden-phone"> 
    <div class="top-panel-button">
	<a class="popup-with-zoom-anim toggle-button md-trigger" href="#small-dialog"><i class="icon-search-2 icon-2x"></i></a>
    </div>
	<div id="small-dialog" class="zoom-anim-dialog mfp-hide">
	<!-- BEGIN SEARCH FORM -->  
	<div class="sb-search">
						<form class="navbar-form" method="get" action="https://www.ostricher.com/" accept-charset="utf-8">
							<input class="sb-search-input" placeholder="Search term..." type="text" value="" name="s">
						</form>
					</div>
<!-- END SEARCH FORM -->	</div> 
</div>
	<div class="container">
		<div class="row-fluid">
			<div class="span12">
				
<div class="row-fluid">

    <div class="span12">
    	<!-- BEGIN LOGO -->                     
<div class="logo">                            
												<h1 class="logo_h logo_h__txt"><a href="https://www.ostricher.com/" class="logo_h logo_h__img"><img src="/io-content/uploads/theme-images/logo-ostrich.jpg" alt="The Ostrich" title="Break; Build; Repeat;"></a></h1>
												
</div>
<!-- END LOGO -->    </div>
	</div>
	<div class="row-fluid post-header">
	<div class="span12">
    			<!-- BEGIN MAIN NAVIGATION  -->
		<div class="menu-button"><i class="icon-menu"></i>
					<a style="position:relative;z-index:100;color:#222222; margin-left:12px;display:inline-block;" class="popup-with-zoom-anim toggle-button md-trigger" href="#small-dialog"><i class="icon-search-1"></i></a>
	<div id="small-dialogs" class="zoom-anim-dialog mfp-hide">
	<!-- BEGIN SEARCH FORM -->  
	<div class="sb-search">
						<form class="navbar-form" method="get" action="https://www.ostricher.com/" accept-charset="utf-8">
							<input class="sb-search-input" placeholder="Search term..." type="text" value="" name="s">
						</form>
					</div>
<!-- END SEARCH FORM -->	</div> 
			</div>
		<nav class="nav nav__primary clearfix"> 
			<ul data-breakpoint="800" id="menu-main" class="flexnav"><li id="menu-item-800" class="menu-item menu-item-type-custom menu-item-object-custom"><a href="/">Home</a></li>
<li id="menu-item-793" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.ostricher.com/about/">About</a></li>
<li id="menu-item-525" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href="https://www.ostricher.com/projects/">Side Projects</a>
<ul class="sub-menu">
	<li id="menu-item-529" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.ostricher.com/active-projects/">Active Projects</a></li>
	<li id="menu-item-526" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.ostricher.com/pending-projects/">Pending Projects</a></li>
	<li id="menu-item-527" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.ostricher.com/on-hold-projects/">On-Hold Projects</a></li>
	<li id="menu-item-528" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.ostricher.com/archived-projects/">Archived Projects</a></li>
</ul>
</li>
<li id="menu-item-530" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href="#">Categories</a>
<ul class="sub-menu">
	<li id="menu-item-27" class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href="https://www.ostricher.com/category/compute/">Compute</a></li>
	<li id="menu-item-923" class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href="https://www.ostricher.com/category/infosec/">Information Security</a></li>
	<li id="menu-item-354" class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href="https://www.ostricher.com/category/lifehacking/">Lifehacking</a></li>
	<li id="menu-item-532" class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href="https://www.ostricher.com/category/make/">Make</a></li>
	<li id="menu-item-533" class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href="https://www.ostricher.com/category/meta/">Meta</a></li>
	<li id="menu-item-26" class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href="https://www.ostricher.com/category/mobile/">Mobile</a></li>
	<li id="menu-item-924" class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href="https://www.ostricher.com/category/money/">Money Stuff</a></li>
	<li id="menu-item-925" class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href="https://www.ostricher.com/category/personal/">Personal</a></li>
	<li id="menu-item-926" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent"><a href="https://www.ostricher.com/category/software-eng/">Software Engineering</a></li>
</ul>
</li>
</ul>			
		 </nav>
		<!-- END MAIN NAVIGATION -->


    </div>
	

</div>
<!--<div class="row"> -->
    
<!-- </div> -->			</div>
		</div>
	</div>

</header><div class="content-holder clearfix">
    <div class="container">
        <div class="row">
            <div class="span12">
                <div class="row">
                <div class="span12" id="title-header">
                <div class="page-header">
                <section class="title-section">
                				                				          </section>
            </div> 
                </div>
                   </div>
                 <div class="row">
                                   <div class="span8 right" id="content">
                        <article id="post-1121" class="post__holder post-1121 post type-post status-publish format-standard has-post-thumbnail hentry category-software-eng tag-python cat-58-id">
<div class="post-formats hidden-phone"><i class="icon-doc-text-1 icon-2x"></i></div>	<div class="row-fluid">
	<div class="span12">
		<header class="post-header">	
					<h2 class="post-title">On Python Closures</h2>
			</header>
		<!-- Post Meta -->
	<div class="meta-space">
				<span>By <a href="https://www.ostricher.com/author/itamar/" title="Posts by Itamar Ostricher" rel="author">Itamar Ostricher</a></span>
					<span><i class="icon-calendar-2"></i> Tuesday, October 14, 2014</span>
					<span><i class="icon-comment-2"></i> <a href="https://www.ostricher.com/2014/10/on-python-closures/#comments" class="comments-link" >1</a></span>
						<span class="post_category"><i class="icon-cloud-2"></i><a href="https://www.ostricher.com/category/software-eng/" >Software Engineering</a></span>
															<span><i class="icon-tag-2"></i>
									<a href="https://www.ostricher.com/tag/python/" rel="tag">python</a>								</span>
															
		<!--// ItamarO addition begin -->
				<!--// ItamarO addition end -->
		
				<span class="post_permalink"><i class="icon-attach-2"></i><a href="https://www.ostricher.com/2014/10/on-python-closures/" title="Permalink On Python Closures">Permalink</a></span>
				
	<span><a href="#" class="zilla-likes" id="zilla-likes-1121" title="Like this">1</a></span>	</div>
	<!--// Post Meta -->
			
	<!-- Post Content -->
	<div class="post_content">	
				<div class="featured-thumbnail thumbnail norm"><img width="300" height="300" src="https://i1.wp.com/www.ostricher.com/io-content/uploads/2014/10/nested-python.jpg?fit=300%2C300" class="attachment-medium size-medium wp-post-image" alt="" srcset="https://i1.wp.com/www.ostricher.com/io-content/uploads/2014/10/nested-python.jpg?w=563 563w, https://i1.wp.com/www.ostricher.com/io-content/uploads/2014/10/nested-python.jpg?resize=150%2C150 150w, https://i1.wp.com/www.ostricher.com/io-content/uploads/2014/10/nested-python.jpg?resize=300%2C300 300w, https://i1.wp.com/www.ostricher.com/io-content/uploads/2014/10/nested-python.jpg?resize=429%2C430 429w, https://i1.wp.com/www.ostricher.com/io-content/uploads/2014/10/nested-python.jpg?resize=80%2C80 80w" sizes="(max-width: 300px) 100vw, 300px" /></div>
	
		<p><em>Closures</em> are an interesting concept in computer programming. They can be powerful and useful, but they also can be tricky to understand and use well.</p>
<p>In this post, I try to provide a clear explanation of <em>closures</em>, and go into specifics on closures support in Python.</p>
<p>Being an &#8220;interesting programming concept&#8221; is nice, but not enough for me. I will present a real use-case for closures in Python.</p>
<p>No programming language is perfect (though Python comes close ðŸ˜‰ ). Programming languages that choose to support closures often need to make difficult tradeoffs. I will discuss some of the choices that were made in Python, and their implications.</p>
<p><span id="more-1121"></span></p>
<div id="tr_shareit-11210" class="tr_shareit-wrapper center">
					<div class="tr_shareit">
						<div class="tr_shareit-content">Python supports closures via lexical scoping since version 2.1. Do you understand it?</div>
						<!-- .tr-shareit-content -->
						<ul class="tr_shareit-bar"><li class="tr_shareit-twitter"><a href="http://twitter.com/home?status=Python+supports+closures+via+lexical+scoping+since+version+2.1.+Do+you+understand+it%3F https://www.ostricher.com/2014/10/on-python-closures/" target="_blank" title="Share on Twitter"><i class="icon-twitter"></i><span>Share on Twitter</span></a></li><li class="tr_shareit-facebook" data-link="https://www.ostricher.com/2014/10/on-python-closures/" data-name="On Python Closures" data-description="Python supports closures via lexical scoping since version 2.1. Do you understand it?"data-picture="https://i1.wp.com/www.ostricher.com/io-content/uploads/2014/10/nested-python.jpg?resize=150%2C150"><a href="http://www.facebook.com/dialog/feed?app_id=1447249925543116&redirect_uri=https://www.ostricher.com/&display=popup&link=https://www.ostricher.com/2014/10/on-python-closures/&name=On Python Closures&description=Python+supports+closures+via+lexical+scoping+since+version+2.1.+Do+you+understand+it%3F&picture=https://i1.wp.com/www.ostricher.com/io-content/uploads/2014/10/nested-python.jpg?resize=150%2C150" title="Share on Facebook"><i class="icon-facebook"></i><span>Share on Facebook</span></a></li><li class="tr_shareit-pinterest"><a href="http://pinterest.com/pin/create/button/?url=https://www.ostricher.com/2014/10/on-python-closures/&media=https://i1.wp.com/www.ostricher.com/io-content/uploads/2014/10/nested-python.jpg?resize=150%2C150&description=Python+supports+closures+via+lexical+scoping+since+version+2.1.+Do+you+understand+it%3F" target="_blank" title="Share on Pinterest"><i class="icon-pinterest-circled"></i><span>Share on Pinterest</span></a></li><li class="tr_shareit-tumblr"><a href="http://www.tumblr.com/share/quote?quote=Python+supports+closures+via+lexical+scoping+since+version+2.1.+Do+you+understand+it%3F&source=The+Ostrich" target="_blank" title="Share on Tumblr"><i class="icon-tumblr"></i><span>Share on Tumblr</span></a></li></ul>
						<!-- .tr-shareit-bar -->
					</div>
					<!-- .tr-shareit -->
				</div>
				<!-- .tr-shareit-wrapper -->
<h3>Closures as a concept</h3>
<p>Derived from the <a href="http://en.wikipedia.org/wiki/Closure_(computer_programming)">Wikipedia entry on Closure</a>:</p>
<blockquote><p>
In computer programming languages, a closure is a function together with a referencing environment of that function. A closure function is any function that uses a variable that is defined in an environment (or scope) that is external to that function, and is accessible within the function when invoked from a scope in which that free variable is not defined.
</p></blockquote>
<p>To illustrate that, here&#8217;s a toy example of closures in Python:</p>
<pre class="brush: python; title: ; notranslate" title="">
def make_multiplier(factor):
    def multiply(number):
        return number * factor
    return multiply

mult6 = make_multiplier(6)
mult7 = make_multiplier(7)

print mult6(7)  # prints 42
print mult7(6)  # prints 42
</pre>
<p>In this example, <code>mult6</code> and <code>mult7</code> are function closures. They are <em>functions</em> because <code>make_multiplier</code> returns the function <code>multiply</code>. It is a <em>closure</em> because the returned function refers to the <em>free variable</em> <code>factor</code>. The <code>factor</code> variable is <em>local</em> in the scope of <code>make_multiplier</code>, but not in the scope of <code>multiply</code>. Since this variable is referenced by the returned function, Python knows it needs to store that variable along with the returned function, and not garbage-collect it once <code>make_multiplier</code> completes.</p>
<p>When the function closure is invoked, it has access to the <code>factor</code> variable <em>as it was when the closure was created</em>, even though the calling scope doesn&#8217;t know about any variable named <code>factor</code>. Even if a variable named <code>factor</code> was defined in the calling scope, it has nothing to do with the <code>factor</code> variable in the closure:</p>
<pre class="brush: python; title: ; notranslate" title="">

def main():
    factor = 10
    mult6 = make_multiplier(6)
    mult7 = make_multiplier(7)
    print mult6(7)  # still prints 42
    print mult7(6)  # still prints 42
    print 'my local factor is', factor  # prints 10

main()
</pre>
<p>In the modified example, <code>main</code> is a function with a local variable named <code>factor</code>. The local <code>factor</code> and the closure <code>factor</code> have nothing to do with each other. For each instance of the multiply closure, <code>factor</code> is the one from the closure, so the results of invoking it are unchanged. In <code>main</code>, the <code>factor</code> variable is assigned <em>10</em> and not changed, so it is still <em>10</em> when printed at the end.</p>
<p>Before digging deeper into the details of Python closures, I&#8217;d like to explore the <em>actual</em> usefulness of closures, setting useless toy examples aside.</p>
<div id="tr_shareit-11211" class="tr_shareit-wrapper center">
					<div class="tr_shareit">
						<div class="tr_shareit-content">Closures in computer programming are generally useful as callback functions</div>
						<!-- .tr-shareit-content -->
						<ul class="tr_shareit-bar"><li class="tr_shareit-twitter"><a href="http://twitter.com/home?status=Closures+in+computer+programming+are+generally+useful+as+callback+functions https://www.ostricher.com/2014/10/on-python-closures/" target="_blank" title="Share on Twitter"><i class="icon-twitter"></i><span>Share on Twitter</span></a></li><li class="tr_shareit-facebook" data-link="https://www.ostricher.com/2014/10/on-python-closures/" data-name="On Python Closures" data-description="Closures in computer programming are generally useful as callback functions"data-picture="https://i1.wp.com/www.ostricher.com/io-content/uploads/2014/10/nested-python.jpg?resize=150%2C150"><a href="http://www.facebook.com/dialog/feed?app_id=1447249925543116&redirect_uri=https://www.ostricher.com/&display=popup&link=https://www.ostricher.com/2014/10/on-python-closures/&name=On Python Closures&description=Closures+in+computer+programming+are+generally+useful+as+callback+functions&picture=https://i1.wp.com/www.ostricher.com/io-content/uploads/2014/10/nested-python.jpg?resize=150%2C150" title="Share on Facebook"><i class="icon-facebook"></i><span>Share on Facebook</span></a></li><li class="tr_shareit-pinterest"><a href="http://pinterest.com/pin/create/button/?url=https://www.ostricher.com/2014/10/on-python-closures/&media=https://i1.wp.com/www.ostricher.com/io-content/uploads/2014/10/nested-python.jpg?resize=150%2C150&description=Closures+in+computer+programming+are+generally+useful+as+callback+functions" target="_blank" title="Share on Pinterest"><i class="icon-pinterest-circled"></i><span>Share on Pinterest</span></a></li><li class="tr_shareit-tumblr"><a href="http://www.tumblr.com/share/quote?quote=Closures+in+computer+programming+are+generally+useful+as+callback+functions&source=The+Ostrich" target="_blank" title="Share on Tumblr"><i class="icon-tumblr"></i><span>Share on Tumblr</span></a></li></ul>
						<!-- .tr-shareit-bar -->
					</div>
					<!-- .tr-shareit -->
				</div>
				<!-- .tr-shareit-wrapper -->
<h3>Motivating Python use-case &#8212; Lazy evaluation</h3>
<p>Consider the following scenario. You&#8217;re developing a media library manager and player. You write the following function to search the library for a media item whose names match a regular expression and &#8220;display&#8221; it:</p>
<pre class="brush: python; title: ; notranslate" title="">
def display_media_by_name(name_query, media_items):
    &quot;&quot;&quot;Display media items who name matches the RegEx `name_query`.

    @param name_query   RegEx matcher object over media item names
    @param media_items  A dictionary of (item_name, callable_media_getter)
    &quot;&quot;&quot;
    for media_item_name in media_items:
        if name_query.match(media_item_name):
            print 'Query matched media item', media_item_name
            get_media = media_items[media_item_name]
            print 'Calling display on matched media item'
            display(get_media())
</pre>
<p>You may be thinking &#8211; why write it like that? Media items are probably files. Why not have the dictionary contain <code>(item_name, media_file_path)</code>? That way the function can open and read the file, and pass the content to <code>display()</code>.</p>
<p>That&#8217;s a valid approach, if you know in advance that you deal with nothing but local media files! The approach I suggest here scales better. It removes the coupling between <em>what is a media item</em>, and <em>how to get the content of a media item</em>. For example, there&#8217;s no need to change the <code>display_media_by_name</code> function to support both local media files, and web-based media streams. As long as the dictionary entry value is a callable that returns the content of the media item &#8211; we&#8217;re good to go!</p>
<p>An alternative strategy may be to have the dictionary contain <code>(item_name, media_content)</code>. That way it&#8217;s the responsibility of whoever populates the dictionary to get the content. The <code>display_media_by_name</code> function has trivial access to the content.</p>
<p>That may have been valid, if &#8220;media&#8221; was only a few small local files. If the media library is expected to hold many large items, the dictionary would be prohibitively large. In addition, notice that it is reasonable to assume that &#8220;most&#8221; media items will never be read in a single session. In that case, opening and reading all of them is an abysmal waste of time of memory (think &#8220;online video streaming&#8221;). This is what &#8220;lazy evaluation&#8221; is all about!</p>
<p>Here&#8217;s a partial <code>main</code> that tries to build a media items dictionary that can be used with the <code>display_media_by_name</code> function:</p>
<pre class="brush: python; title: ; notranslate" title="">
def main():
    media_items = dict()
    for media_file_path in os.listdir('.'):
        media_items[media_file_path] = ?! what to do here ?!
</pre>
<p>Not surprisingly, the answer to <em>?! what to do here ?!</em> is to assign a <em>function closure</em>.</p>
<p>Now I have a real-world use-case! Before describing a solution, I&#8217;d like to stop and look deeper into how Python supports closures.</p>
<h3>Python support &#8212; Statically Nested Scopes</h3>
<p>Starting with version 2.1 of Python, the language implements &#8220;statically nested scopes&#8221;, also known as &#8220;lexical scoping&#8221;. This is described in detail in <a href="http://legacy.python.org/dev/peps/pep-0227/">PEP 227</a>.</p>
<p>The gist of the PEP describes a change in the rules of resolving <em>&#8220;free variables&#8221;</em> in a namespace (or block). A <em>&#8220;free variable&#8221;</em> is a variable that was not <em>&#8220;bound&#8221;</em> in a namespace that referenced it. Before version 2.1, Python defines exactly three namespaces to search for a variable &#8212; local, global, and builtin.</p>
<p>In the case of nested functions (say <code>inner</code> is defined inside a function <code>outer</code>), the local namespace of <code>outer</code> is not visible inside <code>inner</code>. According the the pre-2.1 rules, if <code>inner</code> tries to reference a name bound in <code>outer</code>, it would not see it.</p>
<p>The new rule, starting with 2.1, allows Python to also &#8220;search up&#8221; local namespaces of containing functions. This allows <code>inner</code> to &#8220;see&#8221; variables bound in <code>outer</code>.</p>
<p>I&#8217;ll use the toy example from the beginning of this post to clarify the details.</p>
<pre class="brush: python; title: ; notranslate" title="">
# This is the global scope

def make_multiplier(factor):
    # This is the local scope of make_multiplier
    def multiply(number):
        # This is the local scope of multiply
        return number * factor
    return multiply

def main():
    # This is the local scope of main
    factor = 10

    mult6 = make_multiplier(6)
    mult7 = make_multiplier(7)
    print mult6(7)  # still prints 42
    print mult7(6)  # still prints 42
    print 'my local factor is', factor  # prints 10

main()
</pre>
<p>Here are the namespaces and names in the code:</p>
<table>
<thead>
<tr>
<th><strong>namespace</strong></th>
<th><strong>names bound in namespace</strong></th>
<th><strong>free variables in namespace</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><em>builtin</em> namespace</td>
<td>All those builtin thingies (like print)</td>
<td></td>
</tr>
<tr>
<td><em>global</em> namespace</td>
<td>make_multiplier, main</td>
<td></td>
</tr>
<tr>
<td><em>local</em> namespace of <code>make_multiplier</code></td>
<td>factor(arg), multiply</td>
<td></td>
</tr>
<tr>
<td><em>local</em> namespace of <code>multiply</code></td>
<td>number(arg)</td>
<td>factor</td>
</tr>
<tr>
<td><em>local</em> namespace of <code>main</code></td>
<td>factor(10), mult6, mult7</td>
<td>make_multiplier, print</td>
</tr>
</tbody>
</table>
<p>A <em>name</em> in Python refers to an object (which may also be a function). A name is bound to an object by a &#8220;name binding operation&#8221;.</p>
<p>Name binding operations are: argument declaration, assignment, class and function definition, import statements, for statements, and except clauses.</p>
<p>References to <em>names</em> in the program text refer to the object bound to that name in the innermost function block containing the reference. If a name is used within a code block, but not bound there, the use is treated as a <em>reference to the nearest enclosing function region</em>.</p>
<p>This should provide the rules I used to construct the above table for the example. <code>make_multiplier</code> is a name bound by <code>def</code> in the global namespace. The reference to <code>make_multiplier</code> in <code>main</code> refers to that function because it was not bound in the local scope of <code>main</code>, and the global namespace is the next one to search in.</p>
<p>How does Python resolve the reference to the name <code>factor</code> in <code>multiply</code>? Following the old rules, it searches the global and builtin namespaces. The name <code>factor</code> is not bound to an object in these namespaces, so Python raises an error. According to the new rules, though, Python can use the binding of the name <code>factor</code> introduced in the local namespace of <code>make_multiplier</code>.</p>
<p>As a side note, in the pre-2.1 days it was possible to implement a similar behavior. This was done by passing the value of <code>factor</code> as a default value for a <code>factor</code> argument in <code>multiply</code>: <code>def multiply(number, factor=factor)</code>. This made <code>factor</code> a name bound also in the local namespace of <code>multiply</code>.</p>
<p>This should provide a preliminary understanding of <a href="http://legacy.python.org/dev/peps/pep-0227/">PEP 227</a>. I knowingly skipped exceptions to the rules and edge cases, so I can focus on the essence. I will cover these as well, in a <a href="#caveats">later section</a>. Before that, I want to go back to the motivating use-case, to demonstrate how the new rules allow an elegant implementation.</p>
<h3>Implementing lazy evaluation with a closure</h3>
<p>Now that you understand how lexical scoping works in Python, it should be straight forward to pick up where I stopped:</p>
<pre class="brush: python; title: ; notranslate" title="">
def main():
    media_items = dict()
    for media_file_path in os.listdir('.'):
        def get_media():
            &quot;&quot;&quot;Open and return the content of a media file.&quot;&quot;&quot;
            print 'Opening and reading', media_file_path
            with open(media_file_path, 'r') as media_file:
                return media_file.read()
        media_items[media_file_path] = get_media
</pre>
<p>For each file, I bind the name <code>get_media</code> to a function (object) the returns the content of that file. I then add a record <code>(file_path, file_content_getter_function)</code> to the media items dictionary. It is important to note that the <code>get_media</code> function is never <em>executed</em> during the for-loop. This means that at this stage, the file is never opened and read, achieving the &#8220;laziness&#8221; I wanted.</p>
<p>To wrap up the real-world example, here&#8217;s the full program:</p>
<pre class="brush: python; title: ; notranslate" title="">
import os
import re

def display(media):
    &quot;&quot;&quot;Display media.&quot;&quot;&quot;
    print '{{{'
    print media
    print '}}}'

def display_media_by_name(name_query, media_items):
    &quot;&quot;&quot;Display media items who name matches the RegEx `name_query`.

    @param name_query   RegEx matcher object over media item names
    @param media_items  A dictionary of (item_name, callable_media_getter)
    &quot;&quot;&quot;
    for media_item_name in media_items:
        if name_query.match(media_item_name):
            print 'Query matched media item', media_item_name
            get_media = media_items[media_item_name]
            print 'Calling display on matched media item'
            display(get_media())

def main():
    &quot;&quot;&quot;Create media library from current dir and display some.&quot;&quot;&quot;
    media_items = dict()
    print 'Populating media items dictionary'
    for media_file_path in os.listdir('.'):
        def get_media():
            &quot;&quot;&quot;Open and return the content of a media file.&quot;&quot;&quot;
            print 'Opening and reading', media_file_path
            with open(media_file_path, 'r') as media_file:
                return media_file.read()
        media_items[media_file_path] = get_media
    query_str = r'toy_.*\.py'
    query = re.compile(query_str)
    print 'Displaying media that matches query', query_str
    display_media_by_name(query, media_items)
    print 'Done'

if '__main__' == __name__:
    main()
</pre>
<p>For the sake of the example, the &#8220;media library&#8221; is the collection of plain text files in the current directory. &#8220;Displaying media&#8221; is just printing the content of a plain text file to STDOUT. Here&#8217;s the output of running the program in a directory that contains the <code>toy_closure.py</code> script from the toy example used above:</p>
<pre class="brush: bash; highlight: [6]; title: ; notranslate" title="">
itamar@legolas pyclosure $ python lazy.py
Populating media items dictionary
Displaying media that matches query toy_.*\.py
Query matched media item toy_closure.py
Calling display on matched media item
Opening and reading toy_closure.py
{{{
# This is the global scope

def make_multiplier(factor):
    # This is the local scope of make_multiplier
    def multiply(number):
        # This is the local scope of multiply
        return number * factor
    return multiply

def main():
    # This is the local scope of main
    factor = 10
    mult6 = make_multiplier(6)
    mult7 = make_multiplier(7)
    print mult6(7)  # still prints 42
    print mult7(6)  # still prints 42
    print 'my local factor is', factor  # prints 10

main()
}}}
Done
</pre>
<p>Note that the highlighted message about opening and reading the file appears only when the <code>get_media</code> function is executed. This happens only after the dictionary entry is matched. Maximal laziness achieved.</p>
<h3><a name="caveats"></a>Exceptions, pitfalls and caveats</h3>
<p>An Ostrich always pays its debts. Here are some extra rules and exceptions from <a href="http://legacy.python.org/dev/peps/pep-0227/">PEP 227</a> that I omitted above:</p>
<ul>
<li>If the <code>global *name*</code> statement appears in a code block, all uses of <code>*name*</code> refer to the binding of <code>*name*</code> in the top-level namespace (i.e. global namespace, followed by <code>__builtin__</code> namespace). The <code>global</code> statement must precede all uses of <code>*name*</code>.</li>
<li>It is an error to delete the name of a variable that is referenced in an enclosed scope.</li>
<li>It is an error to use <code>exec</code> in a function with nested block with free variables. Unless the <code>exec</code> explicitly specifies the local namespace.</li>
<li>Names in class scope are <strong>not accessible</strong> via the new rules.</li>
<li>Variables are <strong>not</strong> declared.</li>
</ul>
<p>There are two more related errors that I wasn&#8217;t able to create. Maybe it changed since version 2.1 / 2.2.</p>
<p>Some of these rules and errors show some of the tradeoffs that were made.</p>
<h4>The global statement and lexical scoping</h4>
<p>In its nature, Python doesn&#8217;t have variable declaration semantics. A variable is &#8220;declared&#8221; when it&#8217;s name is bound to an object. This is a major issue if you want to change the value of a global variable in a function! Consider the following code:</p>
<pre class="brush: python; title: ; notranslate" title="">
# global state
STATE = 1

def change_state(new_state):
    print 'Changing state to', new_state
    STATE = new_state

change_state(2)
print 'State is', STATE  # prints &quot;1&quot;
</pre>
<p>The global <code>STATE</code> never changes! The expression <code>STATE = new_state</code> in <code>change_state</code> is a binding operation. It binds the name <code>STATE</code> in the local namespace of <code>change_state</code>, hiding the global name <code>STATE</code>.</p>
<p>To address this issue, Python introduced the <code>global</code> statement:</p>
<pre class="brush: python; highlight: [5]; title: ; notranslate" title="">
# global state
STATE = 1

def change_state(new_state):
    global STATE
    print 'Changing state to', new_state
    STATE = new_state

change_state(2)
print 'State is', STATE  # prints &quot;2&quot;
</pre>
<p>This was a good-enough solution before introducing lexical scoping. But what happens here?</p>
<pre class="brush: python; title: ; notranslate" title="">
def my_parser():
    # my_parser state
    state = 1
    def change_state(new_state):
        print 'Changing state to', new_state
        state = new_state
    change_state(2)
    print 'State is', state  # prints &quot;1&quot;

my_parser()
</pre>
<p>The <code>state</code> name is now bound in both local scopes of <code>my_parser</code> and <code>change_state</code>. There is no syntax to tell Python that you want the <code>state</code> name in <code>change_state</code> to refer to the object that was bound to that name in <code>my_parser</code>! To get the desired behavior, you either need to <code>global state</code> in both scopes, or significantly change the code structure. The first option may result unwanted side effects, like other scopes messing with the global state. The second option may be a hassle.</p>
<p>That is one price for introducing lexical scoping in a language without variable declarations.</p>
<h4>When the old gods and the new gods collide</h4>
<p>The changed rules might result identical code to behave differently in pre-2.1 and post-2.1. Here&#8217;s an example, based on the toy example:</p>
<pre class="brush: python; title: ; notranslate" title="">
# This is the global scope
factor = 100

def make_multiplier(factor):
    # This is the local scope of make_multiplier
    def multiply(number):
        # This is the local scope of multiply
        return number * factor
    return multiply

def main():
    # This is the local scope of main
    factor = 10
    mult6 = make_multiplier(6)
    mult7 = make_multiplier(7)
    print mult6(7)  # still prints 42 with new rules, or 700 with old rules
    print mult7(6)  # still prints 42 with new rules, or 600 with old rules
    print 'my local factor is', factor  # prints 10

main()
print 'my global factor is', factor  # prints 100
</pre>
<p>The only difference in this example is the addition of a global <code>factor</code> variable. But now, according to the old rules, the <code>factor</code> name in <code>multiply</code> refers to the global <code>factor</code>, and not the <code>factor</code> from the enclosing scope.</p>
<p>According to the PEP, Python should print a warning for this case. In my testing it didn&#8217;t. Maybe somewhere between 2.1 to 2.7 the warning was dropped.</p>
<h4>Deleting a captured variable</h4>
<p>Why is it an error to delete a name of a variable that is referenced in an enclosing scope? That should be obvious:</p>
<pre class="brush: python; title: ; notranslate" title="">
def make_multiplier(factor):
    # This is the local scope of make_multiplier
    def multiply(number):
        # This is the local scope of multiply
        return number * factor
    del factor
    return multiply

def main():
    # This is the local scope of main
    mult6 = make_multiplier(6)
    mult7 = make_multiplier(7)
    print mult6(7)  # still prints 42
    print mult7(6)  # still prints 42

main()
</pre>
<p>Running it:</p>
<pre class="brush: bash; title: ; notranslate" title="">
itamar@legolas pyclosure $ python toy_closure.py
SyntaxError: can not delete variable 'factor' referenced in nested scope
</pre>
<p>Duh. If Python needs to be able to access <code>factor</code> when <code>mult6</code> is invoked, it cannot have it deleted!</p>
<h4>To exec or not to exec</h4>
<p>The <code>exec</code> statement in Python allows executing a string as Python code. What happens with <code>exec</code> when lexical scoping is involved?</p>
<pre class="brush: python; title: ; notranslate" title="">
# This is the global scope
MODIFIER = 1

def make_multiplier(factor, exec_str):
    # This is the local scope of make_multiplier
    exec exec_str
    def multiply(number):
        # This is the local scope of multiply
        return number * factor * MODIFIER
    return multiply

def main():
    # This is the local scope of main
    mult6 = make_multiplier(6, 'print &quot;yo 6&quot;')
    mult7 = make_multiplier(7, 'MODIFIER = 10')
    print mult6(7)  # still prints 42
    print mult7(6)  # still prints 42
</pre>
<p>Running the script indeed results an error:</p>
<pre class="brush: bash; title: ; notranslate" title="">
itamar@legolas pyclosure $ python toy_closure.py
  File &quot;toy_closure.py&quot;, line 8
    exec exec_str
SyntaxError: unqualified exec is not allowed in function 'make_multiplier' it contains a nested function with free variables
</pre>
<p>But why? There&#8217;s no harm in printing <code>yo 6</code>, but it is an issue to introduce a new bound name <code>MODIFIER = 10</code> to the local scope! The resolution of <code>MODIFIER</code> depends on the content of the <code>exec_str</code> string, which is generally not known statically.</p>
<p>It is possible to &#8220;sandbox&#8221; <code>exec</code> with <code>exec exec_str in {}</code>. With this modification, we get back the expected behavior:</p>
<pre class="brush: bash; title: ; notranslate" title="">
itamar@legolas pyclosure $ python toy_closure.py
yo 6
42
42
</pre>
<p>Note that the <code>exec 'MODIFIER = 10'</code> was sandboxed, not changing the second &#8220;42&#8221; to &#8220;420&#8221;.</p>
<h4>Another cost of not declaring variables</h4>
<p>This is a frequently quoted example of &#8220;the perils of Python&#8221;:</p>
<pre class="brush: python; title: ; notranslate" title="">
i = 1
def make_multiplier(factor):
    # This is the local scope of make_multiplier
    def multiply(number):
        # This is the local scope of multiply
        return number * factor * i  # i comes from the global scope, right?
    # shitloads of code
    for i in xrange(5):  # oops! i is locally bound in enclosing scope!
        print 'hi', i
    return multiply

def main():
    # This is the local scope of main
    mult6 = make_multiplier(6)
    mult7 = make_multiplier(7)
    print mult6(7)  # what will I print??
    print mult7(6)  # what will I print??

main()
</pre>
<p>Running it:</p>
<pre class="brush: bash; title: ; notranslate" title="">
itamar@legolas pyclosure $ python toy_closure.py
hi 0
hi 1
hi 2
hi 3
hi 4
hi 5
hi 0
hi 1
hi 2
hi 3
hi 4
hi 5
210
210
</pre>
<p>Somewhat unexpectedly, we got 42&#42;5 instead of 42&#42;1. That&#8217;s because the <code>for i</code> loop in <code>make_multiplier</code> made <code>i</code> a locally bound name in the scope of <code>make_multiplier</code> &#8211; regardless of where in the block it was bound. Even though <code>multiply</code> supposedly referenced <code>i</code> &#8220;before&#8221; it was used in the for-loop, Python resolved that <code>i</code> following the rules.</p>
<p>I agree this may be counter-intuitive, and it&#8217;s one of the tradeoffs made in Python. Would you prefer you code to be sprinkled with <code>var i</code> instead?</p>
<h4>Names in class scopes are not visible to nested scopes</h4>
<p>If a class definition occurs in a chain of nested scopes, the resolution process skips the class definition. This exception was added to prevent odd interactions between class attributes and local variable access. Name binding operations in class definitions <strong>don&#8217;t</strong> create bound names in a scope &#8211; they create an attribute on the resulting class object! These attributes can be accessed in class methods with attribute references, either via <code>self</code> or via the class name.</p>
<p>The alternative was to allow regular name binding rules. This would create multiple ways to reference class attributes &#8211; either as class attributes, or as free variables. The decision was to introduce this exception.</p>
<h3>Summary</h3>
<p>That concludes my take on Python support for closures, via lexical scoping. I hope I was able to provide a clean explanation, as I intended.</p>
<p>There is a delicate balance between deep understanding of &#8220;advanced programming concepts&#8221;, and actually being able to use them for something relevant. I hope you were able to relate to my &#8220;motivating example&#8221; of function closure use, and that it helped you understand the concept as as much as it helped me.</p>
<p>When planning this post, I had to choose one &#8220;motivating use case&#8221; to keep the length under control. In practice, I have various uses. Another use-case will be highlighted in an upcoming <a href="/tag/scons/"><code>SCons</code> series</a> episode.</p>
<p>Do you have interesting use-cases for Python closures? Something to say about my primer? The comments are open!</p>

<div id='jp-relatedposts' class='jp-relatedposts' >
	<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
</div>				<div class="clear"></div>
	</div>
	<!-- //Post Content -->	
		
</div></div>
<!-- .share-buttons -->
<div class="share-buttons">
	
<!-- <a class="facebook" target="_blank" onclick="return !window.open(this.href, 'Facebook', 'width=640,height=300')" href="http://www.facebook.com/sharer/sharer.php?u=">Facebook</a> -->
<div class="shareon">Share on:</div>
<a class="hs-icon icon-facebook-1" onClick="window.open('http://www.facebook.com/sharer.php?u=https://www.ostricher.com/2014/10/on-python-closures/','Facebook','width=600,height=300,left='+(screen.availWidth/2-300)+',top='+(screen.availHeight/2-150)+''); return false;" href="http://www.facebook.com/sharer.php?u=https://www.ostricher.com/2014/10/on-python-closures/"></a>
<a class="hs-icon icon-twitter" onClick="window.open('http://twitter.com/share?url=https://www.ostricher.com/2014/10/on-python-closures/&amp;text=On%20Python%20Closures','Twitter share','width=600,height=300,left='+(screen.availWidth/2-300)+',top='+(screen.availHeight/2-150)+''); return false;" href="http://twitter.com/share?url=https://www.ostricher.com/2014/10/on-python-closures/&amp;text=On%20Python%20Closures"></a>
<a class="hs-icon icon-gplus" onClick="window.open('https://plus.google.com/share?url=https://www.ostricher.com/2014/10/on-python-closures/','Google plus','width=585,height=666,left='+(screen.availWidth/2-292)+',top='+(screen.availHeight/2-333)+''); return false;" href="https://plus.google.com/share?url=https://www.ostricher.com/2014/10/on-python-closures/"></a>
<a class="hs-icon icon-digg" onClick="window.open('http://www.digg.com/submit?url=https://www.ostricher.com/2014/10/on-python-closures/','Digg','width=715,height=330,left='+(screen.availWidth/2-357)+',top='+(screen.availHeight/2-165)+''); return false;" href="http://www.digg.com/submit?url=https://www.ostricher.com/2014/10/on-python-closures/"></a>
<a class="hs-icon icon-reddit" onClick="window.open('http://reddit.com/submit?url=https://www.ostricher.com/2014/10/on-python-closures/&amp;title=On%20Python%20Closures','Reddit','width=617,height=514,left='+(screen.availWidth/2-308)+',top='+(screen.availHeight/2-257)+''); return false;" href="http://reddit.com/submit?url=https://www.ostricher.com/2014/10/on-python-closures/&amp;title=On%20Python%20Closures"></a>
<a class="hs-icon icon-linkedin" onClick="window.open('http://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.ostricher.com/2014/10/on-python-closures/','Linkedin','width=863,height=500,left='+(screen.availWidth/2-431)+',top='+(screen.availHeight/2-250)+''); return false;" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.ostricher.com/2014/10/on-python-closures/"></a>
<a class="hs-icon icon-pinterest" href='javascript:void((function()%7Bvar%20e=document.createElement(&apos;script&apos;);e.setAttribute(&apos;type&apos;,&apos;text/javascript&apos;);e.setAttribute(&apos;charset&apos;,&apos;UTF-8&apos;);e.setAttribute(&apos;src&apos;,&apos;http://assets.pinterest.com/js/pinmarklet.js?r=&apos;+Math.random()*99999999);document.body.appendChild(e)%7D)());'></a>
<a class="hs-icon icon-stumbleupon" onClick="window.open('http://www.stumbleupon.com/submit?url=https://www.ostricher.com/2014/10/on-python-closures/&amp;title=On%20Python%20Closures','Stumbleupon','width=600,height=300,left='+(screen.availWidth/2-300)+',top='+(screen.availHeight/2-150)+''); return false;" href="http://www.stumbleupon.com/submit?url=https://www.ostricher.com/2014/10/on-python-closures/&amp;title=On%20Python%20Closures"></a>
<a class="hs-icon icon-tumblr" onClick="window.open('http://www.tumblr.com/share/link?url=www.ostricher.com/2014/10/on-python-closures/&amp;name=On%20Python%20Closures','Tumblr','width=600,height=300,left='+(screen.availWidth/2-300)+',top='+(screen.availHeight/2-150)+''); return false;" href="http://www.tumblr.com/share/link?url=www.ostricher.com/2014/10/on-python-closures/&amp;name=On%20Python%20Closures"></a>
</div><!-- //.share-buttons -->
</article>					<!--BEGIN .pager .single-pager -->
				<ul class="paging">
	<li style="float:left;">
		<a class="btn-pagination" href="https://www.ostricher.com/2014/10/the-ostrich-website-design/" rel="prev">&laquo; Previous post</a>		</li><!--.previous-->
	<li style="float:right;">
		<a class="btn-pagination" href="https://www.ostricher.com/2014/10/scons-extreme-sconscript-simplification/" rel="next">Next Post &raquo;</a>	</li><!--.next-->
	<div class="clear"></div>
</ul><!--.pager-->

	<div class="related-posts">
							<h5 class="related-posts_h">Related Posts</h5>
		
			<ul class="related-posts_list clearfix">

									<li class="related-posts_item">
						
							<figure class="featured-thumbnail thumbnail large">
							<div class="hider-page"></div>
								<a href="https://www.ostricher.com/2016/03/get-safe-paths-from-arbitrary-strings-in-python/" title="Get Safe Paths From Arbitrary Strings In Python"><img width="300" height="220" src="https://i2.wp.com/www.ostricher.com/io-content/uploads/2016/03/ostrichlib-safe-path.png?resize=300%2C220" class="attachment-medium-thumb size-medium-thumb wp-post-image" alt="" srcset="https://i2.wp.com/www.ostricher.com/io-content/uploads/2016/03/ostrichlib-safe-path.png?resize=300%2C220 300w, https://i2.wp.com/www.ostricher.com/io-content/uploads/2016/03/ostrichlib-safe-path.png?zoom=2&amp;resize=300%2C220 600w" sizes="(max-width: 300px) 100vw, 300px" /><span class="zoom-icon"></span></a>
							</figure>
												<h6><a href="https://www.ostricher.com/2016/03/get-safe-paths-from-arbitrary-strings-in-python/" > Get Safe Paths From Arbitrary Strings In Python </a></h6>
					</li>
									<li class="related-posts_item">
													<figure class="thumbnail featured-thumbnail">
							<div class="hider-page"></div>
								<a href="https://www.ostricher.com/2016/03/my-python-3-python-2-dual-development-wishlist/" title="My Python 3 &#038; Python 2 Dual Development Wishlist"><img src="https://www.ostricher.com/io-content/themes/BUZZBLOG-theme/images/empty_thumb.gif" alt="My Python 3 &#038; Python 2 Dual Development Wishlist" /></a>
							</figure>
												<h6><a href="https://www.ostricher.com/2016/03/my-python-3-python-2-dual-development-wishlist/" > My Python 3 &#038; Python 2 Dual Development Wishlist </a></h6>
					</li>
									<li class="related-posts_item">
						
							<figure class="featured-thumbnail thumbnail large">
							<div class="hider-page"></div>
								<a href="https://www.ostricher.com/2015/07/check-out-these-python-podcasts/" title="Check Out These Python Podcasts"><img width="300" height="220" src="https://i1.wp.com/www.ostricher.com/io-content/uploads/2015/07/python-podcasts.png?resize=300%2C220" class="attachment-medium-thumb size-medium-thumb wp-post-image" alt="" /><span class="zoom-icon"></span></a>
							</figure>
												<h6><a href="https://www.ostricher.com/2015/07/check-out-these-python-podcasts/" > Check Out These Python Podcasts </a></h6>
					</li>
									<li class="related-posts_item">
													<figure class="thumbnail featured-thumbnail">
							<div class="hider-page"></div>
								<a href="https://www.ostricher.com/2015/03/hello-python-ctypes-world/" title="Hello, Python ctypes World"><img src="https://www.ostricher.com/io-content/themes/BUZZBLOG-theme/images/empty_thumb.gif" alt="Hello, Python ctypes World" /></a>
							</figure>
												<h6><a href="https://www.ostricher.com/2015/03/hello-python-ctypes-world/" > Hello, Python ctypes World </a></h6>
					</li>
									<li class="related-posts_item">
													<figure class="thumbnail featured-thumbnail">
							<div class="hider-page"></div>
								<a href="https://www.ostricher.com/2015/03/using-pythons-print-with-no-newline/" title="Using Python&#8217;s print With No Newline"><img src="https://www.ostricher.com/io-content/themes/BUZZBLOG-theme/images/empty_thumb.gif" alt="Using Python&#8217;s print With No Newline" /></a>
							</figure>
												<h6><a href="https://www.ostricher.com/2015/03/using-pythons-print-with-no-newline/" > Using Python&#8217;s print With No Newline </a></h6>
					</li>
									<li class="related-posts_item">
						
							<figure class="featured-thumbnail thumbnail large">
							<div class="hider-page"></div>
								<a href="https://www.ostricher.com/2015/02/dont-use-python-lists-where-generators-work-better/" title="Don&#8217;t Use Python Lists Where Generators Work Better!"><img width="300" height="220" src="https://i0.wp.com/www.ostricher.com/io-content/uploads/2015/02/python-generator.png?resize=300%2C220" class="attachment-medium-thumb size-medium-thumb wp-post-image" alt="" /><span class="zoom-icon"></span></a>
							</figure>
												<h6><a href="https://www.ostricher.com/2015/02/dont-use-python-lists-where-generators-work-better/" > Don&#8217;t Use Python Lists Where Generators Work Better! </a></h6>
					</li>
							</ul>
	</div><!-- .related-posts -->
				<!-- BEGIN Comments -->	
		<div id="comments" class="comment-holder">
		<h5 class="comments-h">1 Comment</h5>
		<div class="pagination">
		   
		</div>
		<ul class="commentlist">
 
	   <li class="comment even thread-even depth-1" id="li-comment-36" class="clearfix">
	     	<div id="comment-36" class="comment-body clearfix">
	      		<div class="wrapper">
	      			<div class="comment-author vcard">
	  	         		<img alt='' src='http://2.gravatar.com/avatar/b6eb7856a99de1db499686d7f6e28a8a?s=65&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/b6eb7856a99de1db499686d7f6e28a8a?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />	  	  				
	  	      		</div>
	  		      		      	
	  		     	<div class="extra-wrap">
					<span class="author">Ouri</span><br />
					October 15, 2014	  		     		<p>An alternative approach to closures is partial() from functools. This is similar in most if not all cases.</p>
	     	
	  		     	</div>
	  		    </div>
		     	<div class="wrapper">
				  	<div class="reply">
				    							
						<a rel='nofollow' class='comment-reply-link' href='https://www.ostricher.com/2014/10/on-python-closures/?replytocom=36#respond' onclick='return addComment.moveForm( "comment-36", "36", "respond", "1121" )' aria-label='Reply to Ouri'>Reply <span><i class="icon-reply"></i></span></a>				   	</div>
			 	</div>
	    	</div>
	</li><!-- #comment-## -->
</ul>
		<div class="pagination">
		   
		</div>
	</div>
		

	
		<div id="respond" class="comment-respond">
							<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2014/10/on-python-closures/#respond" style="display:none;">Cancel reply</a></small></h3>
						<form id="commentform" class="comment-form">
				<iframe src="https://jetpack.wordpress.com/jetpack-comment/?blogid=73215231&#038;postid=1121&#038;comment_registration=0&#038;require_name_email=0&#038;stc_enabled=1&#038;stb_enabled=1&#038;show_avatars=1&#038;avatar_default=mystery&#038;greeting=Leave+a+Reply&#038;greeting_reply=Leave+a+Reply+to+%25s&#038;color_scheme=light&#038;lang=en_US&#038;jetpack_version=4.9&#038;sig=5fba16b002a0a85dbc62cb8cac4ffbf89e81ae68#parent=http%3A%2F%2Fwww.ostricher.com%2F2014%2F10%2Fon-python-closures%2F" style="width:100%; height: 430px; border:0;" name="jetpack_remote_comment" class="jetpack_remote_comment" id="jetpack_remote_comment"></iframe>
				<!--[if !IE]><!-->
				<script>
					document.addEventListener( 'DOMContentLoaded', function () {
						var commentForms = document.getElementsByClassName( 'jetpack_remote_comment' );
						for ( var i = 0; i < commentForms.length; i++ ) {
							commentForms[i].allowTransparency = false;
							commentForms[i].scrolling = 'no';
						}
					} );
				</script>
				<!--<![endif]-->
			</form>
		</div>

		
		<input type="hidden" name="comment_parent" id="comment_parent" value="" />

		                    </div>
                    <div class="span4 sidebar" id="sidebar">
                        <div id="social_networks-2" class="widget">			<!-- BEGIN SOCIAL NETWORKS -->
						
			<div class="social social__list unstyled">
				
				    						
																<a target="_blank" class="icon-facebook icon-2x social_link social_link__facebook" data-rel="tooltip" data-original-title="facebook" href="https://www.facebook.com/Ostrich.IO">
							</a>
																				
								    						
																<a target="_blank" class="icon-twitter icon-2x social_link social_link__twitter" data-rel="tooltip" data-original-title="twitter" href="https://twitter.com/OstricherIO">
							</a>
																				
								    						    						    						    						    						    						    						
																<a target="_blank" class="icon-gplus icon-2x social_link social_link__gplus" data-rel="tooltip" data-original-title="gplus" href="https://plus.google.com/+OstricherIO">
							</a>
																				
								    						    						    						    						
																<a target="_blank" class="icon-rss icon-2x social_link social_link__rss" data-rel="tooltip" data-original-title="rss" href="https://www.ostricher.com/feed/">
							</a>
																				
								    						    							      
   		</div>
   		<!-- END SOCIAL NETWORKS -->
      
		</div><div id="mc4wp_form_widget-2" class="widget"><h5>Sign up for the newsletter</h5><script type="text/javascript">(function() {
	if (!window.mc4wp) {
		window.mc4wp = {
			listeners: [],
			forms    : {
				on: function (event, callback) {
					window.mc4wp.listeners.push({
						event   : event,
						callback: callback
					});
				}
			}
		}
	}
})();
</script><!-- MailChimp for WordPress v4.1.3 - https://wordpress.org/plugins/mailchimp-for-wp/ --><form id="mc4wp-form-1" class="mc4wp-form mc4wp-form-1909 mc4wp-form-basic" method="post" data-id="1909" data-name="Default sign-up form" ><div class="mc4wp-form-fields"><p>
	<label for="mc4wp_email">Email address: </label>
	<input type="email" id="mc4wp_email" name="EMAIL" placeholder="Your email address" required />
</p>
<p>
    <label for="mc4wp_name">Tell me your name (if you want to):</label>
    <input type="text" id="mc4wp_name" name="NAME" placeholder="Your name" />
</p>

<p>
	<input type="submit" value="Sign up" />
</p><div style="display: none;"><input type="text" name="_mc4wp_honeypot" value="" tabindex="-1" autocomplete="off" /></div><input type="hidden" name="_mc4wp_timestamp" value="1525693633" /><input type="hidden" name="_mc4wp_form_id" value="1909" /><input type="hidden" name="_mc4wp_form_element_id" value="mc4wp-form-1" /></div><div class="mc4wp-response"></div></form><!-- / MailChimp for WordPress Plugin --></div>		<div id="my-recent-comments-2" class="widget">			<h5>Recent Comments</h5>		<ul class="comments-custom unstyled">			
      <li class="comments-custom_li">
			
						
			<div class="small"><i class="icon-comment-alt"></i> Itamar Ostricher | <time>2016-03-17 06:22:34</time></div>
      	<div class="clear"></div>
			<div class="comments-custom_txt">
				<a href="https://www.ostricher.com/2013/09/my-arduino-powered-ac-control/#comment-1844" title="Go to this comment">Yes, you can do signal processing to detect specific frequency beeps, ...</a>
			</div>
		</li>
		
   			
      <li class="comments-custom_li">
			
						
			<div class="small"><i class="icon-comment-alt"></i> eddie | <time>2016-03-15 17:59:58</time></div>
      	<div class="clear"></div>
			<div class="comments-custom_txt">
				<a href="https://www.ostricher.com/2013/09/my-arduino-powered-ac-control/#comment-1843" title="Go to this comment">Hi Can I just Check that is there like specific frequency beep  to spe...</a>
			</div>
		</li>
		
   			
      <li class="comments-custom_li">
			
						
			<div class="small"><i class="icon-comment-alt"></i> FotoJournal | <time>2016-01-15 00:59:22</time></div>
      	<div class="clear"></div>
			<div class="comments-custom_txt">
				<a href="https://www.ostricher.com/2015/06/how-to-use-ssh-with-multiple-github-accounts/#comment-1807" title="Go to this comment">Also work remembering that you'll need to be added to the repo as a co...</a>
			</div>
		</li>
		
   			
      <li class="comments-custom_li">
			
						
			<div class="small"><i class="icon-comment-alt"></i> mostlybinary | <time>2015-12-04 21:54:39</time></div>
      	<div class="clear"></div>
			<div class="comments-custom_txt">
				<a href="https://www.ostricher.com/2015/11/meteor-todo-app-with-react-tutorial/#comment-1729" title="Go to this comment">As for the front-end frameworks, Meteor is committed to supporting all...</a>
			</div>
		</li>
		
   			
      <li class="comments-custom_li">
			
						
			<div class="small"><i class="icon-comment-alt"></i> Matthew (@MatthewMetzger) | <time>2015-11-30 04:42:36</time></div>
      	<div class="clear"></div>
			<div class="comments-custom_txt">
				<a href="https://www.ostricher.com/2015/11/meteor-coursera-course/#comment-1715" title="Go to this comment">I agree with your summary. I just finished week two and I am liking th...</a>
			</div>
		</li>
		
   		</ul>
		</div>		<div id="recent-posts-3" class="widget">		<h5>Recent Posts</h5>		<ul>
					<li>
				<a href="https://www.ostricher.com/2016/04/go-plain-ubiquitous-plaintext-capture-part-1-nvalt/">Go Plain Ubiquitous Plaintext Capture, Part 1: nvALT</a>
							<span class="post-date">April 9, 2016</span>
						</li>
					<li>
				<a href="https://www.ostricher.com/2016/03/get-safe-paths-from-arbitrary-strings-in-python/">Get Safe Paths From Arbitrary Strings In Python</a>
							<span class="post-date">March 30, 2016</span>
						</li>
					<li>
				<a href="https://www.ostricher.com/2016/03/migrating-kambatz-meteor-app-to-galaxy/">Migrating Kambatz Meteor App to Galaxy</a>
							<span class="post-date">March 27, 2016</span>
						</li>
				</ul>
		</div>		<div id="text-2" class="widget"><h5>Buy Me Coffee!</h5>			<div class="textwidget"><p align="center">
More coffee == more content!<br />
<a href="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=AXPTQUWH26Y5A&lc=IL&item_name=ItamarO%20%40%20The%20Ostrich&item_number=itamaro%2ethe%2eostrich%C2%A4cy_code=USD&bn=PP%2dDonationsBF%3abtn_donateCC_LG%2egif%3aNonHosted" target='blank'><img src="https://i1.wp.com/www.paypal.com/en_US/i/btn/x-click-but04.gif?w=900&#038;ssl=1" data-recalc-dims="1" /></a>
</p></div>
		</div><div id="text-4" class="widget"><h5>Paying The Bills</h5>			<div class="textwidget"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- ostrich-sidebar -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-8654111040751380"
     data-ad-slot="9189217750"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
		</div><div id="text-3" class="widget"><h5>Copyright Information</h5>			<div class="textwidget"><p align="center">
<a href="http://creativecommons.org/licenses/by/4.0/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://creativecommons.org/licenses/by/4.0/', '');" rel="license"><img alt="Creative Commons License" style="border-width:0" src="https://i0.wp.com/i.creativecommons.org/l/by/4.0/88x31.png?w=900&#038;ssl=1" data-recalc-dims="1" /></a><br /><span>The Ostrich</span> by <a href="https://www.ostricher.com/" rel="cc:attributionURL">Itamar Ostricher</a> is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://creativecommons.org/licenses/by/4.0/', 'Creative Commons Attribution 4.0 International License');" rel="license">Creative Commons Attribution 4.0 International License</a>.
</p></div>
		</div>                    </div>
					                </div>
            </div>
        </div>
    </div>
</div>
<footer class="footer">


<div class="lowestfooter">
	<div class="container">
<div class="row-fluid copyright">
    <div class="span6">
	    </div>
    <div class="span6">
    	<div id="footer-text" class="footer-text">
		
			Site by <a href="http://www.gootte.com" target="_blank">Gootte</a>		</div>    </div>
</div>
</div>
</div>
</footer>
</div><!--#main-->	
	
	<div id="back-top-wrapper" class="visible-desktop">
	    <p id="back-top">
	        <a href="#top"><span></span></a>
	    </p>
	</div>
	<div style="display:none">
	<div class="grofile-hash-map-b6eb7856a99de1db499686d7f6e28a8a">
	</div>
	</div>
<script type="text/javascript">(function() {function addEventListener(element,event,handler) {
	if(element.addEventListener) {
		element.addEventListener(event,handler, false);
	} else if(element.attachEvent){
		element.attachEvent('on'+event,handler);
	}
}function maybePrefixUrlField() {
	if(this.value.trim() !== '' && this.value.indexOf('http') !== 0) {
		this.value = "http://" + this.value;
	}
}

var urlFields = document.querySelectorAll('.mc4wp-form input[type="url"]');
if( urlFields && urlFields.length > 0 ) {
	for( var j=0; j < urlFields.length; j++ ) {
		addEventListener(urlFields[j],'blur',maybePrefixUrlField);
	}
}/* test if browser supports date fields */
var testInput = document.createElement('input');
testInput.setAttribute('type', 'date');
if( testInput.type !== 'date') {

	/* add placeholder & pattern to all date fields */
	var dateFields = document.querySelectorAll('.mc4wp-form input[type="date"]');
	for(var i=0; i<dateFields.length; i++) {
		if(!dateFields[i].placeholder) {
			dateFields[i].placeholder = 'YYYY-MM-DD';
		}
		if(!dateFields[i].pattern) {
			dateFields[i].pattern = '[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])';
		}
	}
}

})();</script><script type='text/javascript' src='https://www.ostricher.com/io-content/plugins/akismet/_inc/form.js?ver=3.3.2'></script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b'></script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.9b'></script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushBash.js?ver=3.0.9b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://www.ostricher.com/io-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "https://www.ostricher.com/io-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<link rel='stylesheet' id='tr_shareit-css-css'  href='https://www.ostricher.com/io-content/plugins/tr-shareit/css/tr-plugin-style.css?ver=1.0.7' type='text/css' media='all' />
<script type='text/javascript' src='https://www.ostricher.com/wp-includes/js/comment-reply.min.js?ver=4.7.10'></script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/plugins/jetpack/modules/photon/photon.js?ver=20130122'></script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/plugins/contact-form-7/includes/js/jquery.form.min.js?ver=3.51.0-2014.06.20'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var _wpcf7 = {"loaderUrl":"https:\/\/www.ostricher.com\/io-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","recaptcha":{"messages":{"empty":"Please verify that you are not a robot."}},"sending":"Sending ...","cached":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/plugins/contact-form-7/includes/js/scripts.js?ver=4.5'></script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/plugins/easy-image-display/js/jquery.colorbox-min.js?ver=4.7.10'></script>
<script type='text/javascript' src='https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201819'></script>
<script type='text/javascript' src='https://s.gravatar.com/js/gprofiles.js?ver=2018Mayaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/plugins/jetpack/modules/wpgroho.js?ver=4.7.10'></script>
<script type='text/javascript' src='https://www.ostricher.com/wp-includes/js/wp-embed.min.js?ver=4.7.10'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var shareitjs = {"app_id":"1447249925543116","fb_published":"Post was published.","fb_not_published":"Post was not published, please try again later."};
/* ]]> */
</script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/plugins/tr-shareit/js/tr-plugin-script.js?ver=1.0.7'></script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/themes/BUZZBLOG-theme/js/jquery.easing.1.3.js?ver=1.3'></script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/themes/BUZZBLOG-theme/js/jquery.flexnav.min.js?ver=3.1.5'></script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/themes/BUZZBLOG-theme/js/jquery.magnificpopup.js?ver=0.9.9'></script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/themes/BUZZBLOG-theme/js/jquery.plugins.js?ver=3.1.5'></script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/themes/BUZZBLOG-theme/js/custom.js?ver=1.0'></script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/themes/BUZZBLOG-theme/js/jquery.appear.js?ver=1.0.0'></script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/themes/BUZZBLOG-theme/bootstrap/js/bootstrap.min.js?ver=2.3.0'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var mc4wp_forms_config = [];
/* ]]> */
</script>
<script type='text/javascript' src='https://www.ostricher.com/io-content/plugins/mailchimp-for-wp/assets/js/forms-api.min.js?ver=4.1.3'></script>
<!--[if lte IE 9]>
<script type='text/javascript' src='https://www.ostricher.com/io-content/plugins/mailchimp-for-wp/assets/js/third-party/placeholders.min.js?ver=4.1.3'></script>
<![endif]-->

		<!--[if IE]>
		<script type="text/javascript">
		if ( 0 === window.location.hash.indexOf( '#comment-' ) ) {
			// window.location.reload() doesn't respect the Hash in IE
			window.location.hash = window.location.hash;
		}
		</script>
		<![endif]-->
		<script type="text/javascript">
			var comm_par_el = document.getElementById( 'comment_parent' ),
			    comm_par = (comm_par_el && comm_par_el.value) ? comm_par_el.value : '',
			    frame = document.getElementById( 'jetpack_remote_comment' ),
			    tellFrameNewParent;

			tellFrameNewParent = function() {
				if ( comm_par ) {
					frame.src = "https://jetpack.wordpress.com/jetpack-comment/?blogid=73215231&postid=1121&comment_registration=0&require_name_email=0&stc_enabled=1&stb_enabled=1&show_avatars=1&avatar_default=mystery&greeting=Leave+a+Reply&greeting_reply=Leave+a+Reply+to+%25s&color_scheme=light&lang=en_US&jetpack_version=4.9&sig=5fba16b002a0a85dbc62cb8cac4ffbf89e81ae68#parent=http%3A%2F%2Fwww.ostricher.com%2F2014%2F10%2Fon-python-closures%2F" + '&replytocom=' + parseInt( comm_par, 10 ).toString();
				} else {
					frame.src = "https://jetpack.wordpress.com/jetpack-comment/?blogid=73215231&postid=1121&comment_registration=0&require_name_email=0&stc_enabled=1&stb_enabled=1&show_avatars=1&avatar_default=mystery&greeting=Leave+a+Reply&greeting_reply=Leave+a+Reply+to+%25s&color_scheme=light&lang=en_US&jetpack_version=4.9&sig=5fba16b002a0a85dbc62cb8cac4ffbf89e81ae68#parent=http%3A%2F%2Fwww.ostricher.com%2F2014%2F10%2Fon-python-closures%2F";
				}
			};

	
			if ( 'undefined' !== typeof addComment ) {
				addComment._Jetpack_moveForm = addComment.moveForm;

				addComment.moveForm = function( commId, parentId, respondId, postId ) {
					var returnValue = addComment._Jetpack_moveForm( commId, parentId, respondId, postId ), cancelClick, cancel;

					if ( false === returnValue ) {
						cancel = document.getElementById( 'cancel-comment-reply-link' );
						cancelClick = cancel.onclick;
						cancel.onclick = function() {
							var cancelReturn = cancelClick.call( this );
							if ( false !== cancelReturn ) {
								return cancelReturn;
							}

							if ( !comm_par ) {
								return cancelReturn;
							}

							comm_par = 0;

							tellFrameNewParent();

							return cancelReturn;
						};
					}

					if ( comm_par == parentId ) {
						return returnValue;
					}

					comm_par = parentId;

					tellFrameNewParent();

					return returnValue;
				};
			}

	
			if ( window.postMessage ) {
				if ( document.addEventListener ) {
					window.addEventListener( 'message', function( event ) {
						if ( "https:\/\/jetpack.wordpress.com" !== event.origin ) {
							return;
						}

						jQuery( frame ).height( event.data );
					} );
				} else if ( document.attachEvent ) {
					window.attachEvent( 'message', function( event ) {
						if ( "https:\/\/jetpack.wordpress.com" !== event.origin ) {
							return;
						}

						jQuery( frame ).height( event.data );
					} );
				}
			}
		</script>

	<script type='text/javascript' src='https://stats.wp.com/e-201819.js' async defer></script>
<script type='text/javascript'>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:4.9',blog:'73215231',post:'1121',tz:'3',srv:'www.ostricher.com'} ]);
	_stq.push([ 'clickTrackerInit', '73215231', '1121' ]);
</script>
 <!-- this is used by many Wordpress features and for plugins to work properly -->


</body>
</html>
<!-- Dynamic page generated in 1.211 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2018-05-07 14:47:13 -->

<!-- Compression = gzip -->
